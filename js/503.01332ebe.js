"use strict";(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[503],{8448:function(t,e,r){r.d(e,{Z:function(){return b}});var s,a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"nav nav-tabs mb-4"},t._l(t.tabs,(function(e){return r("li",{key:e.id,staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:e.path}},[t._v(" "+t._s(e.title)+" ")])],1)})),0)},n=[],i=new Uint8Array(16);function o(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(i)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function d(t){return"string"===typeof t&&u.test(t)}for(var l=d,c=[],m=0;m<256;++m)c.push((m+256).toString(16).substr(1));function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r}var v=f;function p(t,e,r){t=t||{};var s=t.random||(t.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){r=r||0;for(var a=0;a<16;++a)e[r+a]=s[a];return e}return v(s)}var _=p,h={data(){return{tabs:[{id:_(),title:"首頁",path:"/restaurants"},{id:_(),title:"最新動態",path:"/restaurants/feeds"},{id:_(),title:"TOP 10 人氣餐廳",path:"/restaurants/top"},{id:_(),title:"美食達人",path:"/users/top"}]}}},g=h,y=r(1001),C=(0,y.Z)(g,a,n,!1,null,"2ab0b204",null),b=C.exports},2261:function(t,e,r){r.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"spinner"},[r("div",{staticClass:"bouncing-loader"},[r("div"),r("div"),r("div")])])}],n=r(1001),i={},o=(0,n.Z)(i,s,a,!1,null,"74807b6a",null),u=o.exports},6503:function(t,e,r){r.r(e),r.d(e,{default:function(){return N}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("navTabs"),t.isLoading?r("Spinner"):[r("h1",{staticClass:"mt-5"},[t._v("最新動態")]),r("hr"),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("h3",[t._v("最新餐廳")]),r("NewestRestaurants",{attrs:{rest:t.restaurants}})],1),r("div",{staticClass:"col-md-6"},[r("h3",[t._v("最新評論")]),r("NewestComments",{attrs:{NewestComments:t.comments}})],1)])]],2)},a=[],n=r(8448),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[t._v("最新餐廳")]),r("div",{staticClass:"card-body"},t._l(t.rest,(function(e){return r("div",{key:e.id},[r("h4",[r("router-link",{attrs:{to:{name:"RESTAURANT",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")]),t._v("   "),r("small",[t._v(t._s(e.Category?e.Category.name:"未分類"))])],1),r("p",[t._v(t._s(e.description))]),t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" "),r("hr")])})),0)])},o=[],u=r(8247),d={mixins:[u.q],props:{rest:{type:Array,required:!0}}},l=d,c=r(1001),m=(0,c.Z)(l,i,o,!1,null,"14643bd2",null),f=m.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[t._v("最新評論")]),t._l(t.NewestComments,(function(e){return r("div",{key:e.id,staticClass:"card-body"},[r("div",[r("h4",[r("router-link",{attrs:{to:{name:"RESTAURANT",params:{id:e.Restaurant.id}}}},[t._v(" "+t._s(e.Restaurant.name)+" ")])],1),r("p",[t._v(t._s(e.text))]),t._v(" by "),r("a",{attrs:{href:"#"}},[t._v(" "+t._s(e.User.name)+" ")]),t._v(" "+t._s(t._f("fromNow")(e.updatedAt))+" "),r("hr")])])}))],2)},p=[],_={mixins:[u.q],props:{NewestComments:{type:Array,required:!0}}},h=_,g=(0,c.Z)(h,v,p,!1,null,null,null),y=g.exports,C=r(2261),b=r(1947),w=r(1926),R={name:"restaurant-feeds",components:{navTabs:n.Z,NewestRestaurants:f,NewestComments:y,Spinner:C.Z},data(){return{restaurants:[],comments:[],isLoading:!0}},created(){this.featchFeeds()},methods:{async featchFeeds(){try{const t=await b.Z.getFeeds();console.log("res",t);const{restaurants:e,comments:r}=t.data;this.restaurants=e,this.comments=r.filter((t=>t.Restaurant.name&&t.text)),this.isLoading=!1}catch(t){this.isLoading=!1,w.F.fire({icon:"error",title:"無法取得資料，請稍後再試"})}}}},k=R,x=(0,c.Z)(k,s,a,!1,null,null,null),N=x.exports},1947:function(t,e,r){var s=r(1926);e["Z"]={getRestaurants({page:t,categoryId:e}){const r=new URLSearchParams({page:t,categoryId:e});return s.l.get(`/restaurants?${r.toString()}`)},getFeeds(){return s.l.get("/restaurants/feeds")},restaurants:{create({formData:t}){return s.l.post("/admin/restaurants",t)},getRestaurant({restaurantId:t}){return s.l.get(`/restaurants/${t}`)}},comments:{postComments({restaurantId:t,text:e}){return s.l.post("/comments",{restaurantId:t,text:e})},deleteComment({id:t}){return s.l["delete"](`/comments/${t}`)}}}}}]);
//# sourceMappingURL=503.01332ebe.js.map