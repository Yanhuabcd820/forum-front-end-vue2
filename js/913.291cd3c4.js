"use strict";(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[913],{8448:function(t,e,n){n.d(e,{Z:function(){return C}});var r,s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"nav nav-tabs mb-4"},t._l(t.tabs,(function(e){return n("li",{key:e.id,staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:e.path}},[t._v(" "+t._s(e.title)+" ")])],1)})),0)},a=[],o=new Uint8Array(16);function i(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function u(t){return"string"===typeof t&&l.test(t)}for(var c=u,d=[],f=0;f<256;++f)d.push((f+256).toString(16).substr(1));function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n}var h=p;function m(t,e,n){t=t||{};var r=t.random||(t.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return h(r)}var v=m,g={data(){return{tabs:[{id:v(),title:"首頁",path:"/restaurants"},{id:v(),title:"最新動態",path:"/restaurants/feeds"},{id:v(),title:"TOP 10 人氣餐廳",path:"/restaurants/top"},{id:v(),title:"美食達人",path:"/users/top"}]}}},w=g,y=n(1001),b=(0,y.Z)(w,s,a,!1,null,"2ab0b204",null),C=b.exports},2261:function(t,e,n){n.d(e,{Z:function(){return l}});var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"bouncing-loader"},[n("div"),n("div"),n("div")])])}],a=n(1001),o={},i=(0,a.Z)(o,r,s,!1,null,"74807b6a",null),l=i.exports},1648:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container py-5"},[n("navTabs"),t.isLoading?n("Spinner"):[n("h1",{staticClass:"mt-5"},[t._v("美食達人")]),n("hr"),n("div",{staticClass:"row text-center"},t._l(t.users,(function(e){return n("div",{key:e.id,staticClass:"col-3"},[n("a",{attrs:{href:"#"}},[n("img",{attrs:{src:e.image?e.image:"http://via.placeholder.com/300x300?text=No+Image",width:"140px",height:"140px"}})]),n("h2",[t._v(t._s(e.name))]),n("span",{staticClass:"badge badge-secondary"},[t._v("追蹤人數："+t._s(e.followerCount))]),n("p",{staticClass:"mt-3"},[e.isFollowed?n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){return t.cancleFollow(e.id)}}},[t._v(" 取消追蹤 ")]):n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.addFollow(e.id)}}},[t._v(" 追蹤 ")])])])})),0)]],2)},s=[],a=n(8448),o=n(3652),i=n(2261),l=n(1926),u={name:"userTop",components:{navTabs:a.Z,Spinner:i.Z},data(){return{users:[],isLoading:!0}},created(){this.fetchTopUsers()},methods:{async fetchTopUsers(){try{const{data:t}=await o.Z.getTopUsers();this.users=t.users.map((t=>({id:t.id,name:t.name,image:t.image,followerCount:t.FollowerCount,isFollowed:t.isFollowed}))),this.isLoading=!1}catch(t){this.isLoading=!1,console.log(t),l.F.fire({icon:"error",title:"無法取得美食達人，請稍後再試"})}},async cancleFollow(t){try{const{data:e}=await o.Z.deleteFollowing({userId:t});this.users=this.users.map((e=>e.id===t?{...e,followerCount:e.followerCount-1,isFollowed:!1}:{...e}))}catch(e){console.log(e),l.F.fire({icon:"error",title:"無法取得美食達人，請稍後再試"})}},async addFollow(t){try{const{data:e}=await o.Z.addFollowing({userId:t});this.users=this.users.map((t=>t.id===userId?{...t,followerCount:t.followerCount+1,isFollowed:!0}:{...t}))}catch(e){l.F.fire({icon:"error",title:"無法加入追蹤，請稍後再試"})}}}},c=u,d=n(1001),f=(0,d.Z)(c,r,s,!1,null,null,null),p=f.exports}}]);
//# sourceMappingURL=913.291cd3c4.js.map