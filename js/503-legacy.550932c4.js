(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[503],{8448:function(t,e,r){"use strict";r.d(e,{Z:function(){return R}});var n,a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"nav nav-tabs mb-4"},t._l(t.tabs,(function(e){return r("li",{key:e.id,staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:e.path}},[t._v(" "+t._s(e.title)+" ")])],1)})),0)},s=[],i=new Uint8Array(16);function u(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function c(t){return"string"===typeof t&&o.test(t)}for(var l=c,f=[],h=0;h<256;++h)f.push((h+256).toString(16).substr(1));function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(f[t[e+0]]+f[t[e+1]]+f[t[e+2]]+f[t[e+3]]+"-"+f[t[e+4]]+f[t[e+5]]+"-"+f[t[e+6]]+f[t[e+7]]+"-"+f[t[e+8]]+f[t[e+9]]+"-"+f[t[e+10]]+f[t[e+11]]+f[t[e+12]]+f[t[e+13]]+f[t[e+14]]+f[t[e+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r}var v=d;function p(t,e,r){t=t||{};var n=t.random||(t.rng||u)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var a=0;a<16;++a)e[r+a]=n[a];return e}return v(n)}var m=p,g={data:function(){return{tabs:[{id:m(),title:"首頁",path:"/restaurants"},{id:m(),title:"最新動態",path:"/restaurants/feeds"},{id:m(),title:"TOP 10 人氣餐廳",path:"/restaurants/top"},{id:m(),title:"美食達人",path:"/users/top"}]}}},y=g,w=r(1001),_=(0,w.Z)(y,a,s,!1,null,"2ab0b204",null),R=_.exports},2261:function(t,e,r){"use strict";r.d(e,{Z:function(){return o}});var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"spinner"},[r("div",{staticClass:"bouncing-loader"},[r("div"),r("div"),r("div")])])}],s=r(1001),i={},u=(0,s.Z)(i,n,a,!1,null,"74807b6a",null),o=u.exports},6503:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return L}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("navTabs"),t.isLoading?r("Spinner"):[r("h1",{staticClass:"mt-5"},[t._v("最新動態")]),r("hr"),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("h3",[t._v("最新餐廳")]),r("NewestRestaurants",{attrs:{rest:t.restaurants}})],1),r("div",{staticClass:"col-md-6"},[r("h3",[t._v("最新評論")]),r("NewestComments",{attrs:{NewestComments:t.comments}})],1)])]],2)},a=[],s=r(6198),i=(r(5666),r(7327),r(1539),r(8309),r(8448)),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[t._v("最新餐廳")]),r("div",{staticClass:"card-body"},t._l(t.rest,(function(e){return r("div",{key:e.id},[r("h4",[r("router-link",{attrs:{to:{name:"RESTAURANT",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")]),t._v("   "),r("small",[t._v(t._s(e.Category?e.Category.name:"未分類"))])],1),r("p",[t._v(t._s(e.description))]),t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" "),r("hr")])})),0)])},o=[],c=r(8247),l={mixins:[c.q],props:{rest:{type:Array,required:!0}}},f=l,h=r(1001),d=(0,h.Z)(f,u,o,!1,null,"14643bd2",null),v=d.exports,p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[t._v("最新評論")]),t._l(t.NewestComments,(function(e){return r("div",{key:e.id,staticClass:"card-body"},[r("div",[r("h4",[r("router-link",{attrs:{to:{name:"RESTAURANT",params:{id:e.Restaurant.id}}}},[t._v(" "+t._s(e.Restaurant.name)+" ")])],1),r("p",[t._v(t._s(e.text))]),t._v(" by "),r("a",{attrs:{href:"#"}},[t._v(" "+t._s(e.User.name)+" ")]),t._v(" "+t._s(t._f("fromNow")(e.updatedAt))+" "),r("hr")])])}))],2)},m=[],g={mixins:[c.q],props:{NewestComments:{type:Array,required:!0}}},y=g,w=(0,h.Z)(y,p,m,!1,null,null,null),_=w.exports,R=r(2261),b=r(1947),k=r(1926),C={name:"restaurant-feeds",components:{navTabs:i.Z,NewestRestaurants:v,NewestComments:_,Spinner:R.Z},data:function(){return{restaurants:[],comments:[],isLoading:!0}},created:function(){this.featchFeeds()},methods:{featchFeeds:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.Z.getFeeds();case 3:r=e.sent,console.log("res",r),n=r.data,a=n.restaurants,s=n.comments,t.restaurants=a,t.comments=s.filter((function(t){return t.Restaurant.name&&t.text})),t.isLoading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),t.isLoading=!1,k.F.fire({icon:"error",title:"無法取得資料，請稍後再試"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()}}},x=C,U=(0,h.Z)(x,n,a,!1,null,null,null),L=U.exports},4362:function(t,e,r){var n=r(1589),a=Math.floor,s=function(t,e){var r=t.length,o=a(r/2);return r<8?i(t,e):u(t,s(n(t,0,o),e),s(n(t,o),e),e)},i=function(t,e){var r,n,a=t.length,s=1;while(s<a){n=s,r=t[s];while(n&&e(t[n-1],r)>0)t[n]=t[--n];n!==s++&&(t[n]=r)}return t},u=function(t,e,r,n){var a=e.length,s=r.length,i=0,u=0;while(i<a||u<s)t[i+u]=i<a&&u<s?n(e[i],r[u])<=0?e[i++]:r[u++]:i<a?e[i++]:r[u++];return t};t.exports=s},590:function(t,e,r){var n=r(7293),a=r(5112),s=r(1913),i=a("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,n){e["delete"]("b"),r+=n+t})),s&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},7066:function(t,e,r){"use strict";var n=r(9670);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},9714:function(t,e,r){"use strict";var n=r(1702),a=r(6530).PROPER,s=r(1320),i=r(9670),u=r(7976),o=r(1340),c=r(7293),l=r(7066),f="toString",h=RegExp.prototype,d=h[f],v=n(l),p=c((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),m=a&&d.name!=f;(p||m)&&s(RegExp.prototype,f,(function(){var t=i(this),e=o(t.source),r=t.flags,n=o(void 0===r&&u(h,t)&&!("flags"in h)?v(t):r);return"/"+e+"/"+n}),{unsafe:!0})},5556:function(t,e,r){"use strict";r(6992);var n=r(2109),a=r(7854),s=r(5005),i=r(6916),u=r(1702),o=r(590),c=r(1320),l=r(2248),f=r(8003),h=r(4994),d=r(9909),v=r(5787),p=r(614),m=r(2597),g=r(9974),y=r(648),w=r(9670),_=r(111),R=r(1340),b=r(30),k=r(9114),C=r(8554),x=r(1246),U=r(8053),L=r(5112),S=r(4362),E=L("iterator"),A="URLSearchParams",N=A+"Iterator",Z=d.set,P=d.getterFor(A),I=d.getterFor(N),T=s("fetch"),q=s("Request"),F=s("Headers"),$=q&&q.prototype,O=F&&F.prototype,V=a.RegExp,j=a.TypeError,D=a.decodeURIComponent,Q=a.encodeURIComponent,z=u("".charAt),B=u([].join),H=u([].push),J=u("".replace),M=u([].shift),G=u([].splice),K=u("".split),W=u("".slice),X=/\+/g,Y=Array(4),tt=function(t){return Y[t-1]||(Y[t-1]=V("((?:%[\\da-f]{2}){"+t+"})","gi"))},et=function(t){try{return D(t)}catch(e){return t}},rt=function(t){var e=J(t,X," "),r=4;try{return D(e)}catch(n){while(r)e=J(e,tt(r--),et);return e}},nt=/[!'()~]|%20/g,at={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},st=function(t){return at[t]},it=function(t){return J(Q(t),nt,st)},ut=h((function(t,e){Z(this,{type:N,iterator:C(P(t).entries),kind:e})}),"Iterator",(function(){var t=I(this),e=t.kind,r=t.iterator.next(),n=r.value;return r.done||(r.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),r}),!0),ot=function(t){this.entries=[],this.url=null,void 0!==t&&(_(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===z(t,0)?W(t,1):t:R(t)))};ot.prototype={type:A,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,a,s,u,o,c=x(t);if(c){e=C(t,c),r=e.next;while(!(n=i(r,e)).done){if(a=C(w(n.value)),s=a.next,(u=i(s,a)).done||(o=i(s,a)).done||!i(s,a).done)throw j("Expected sequence with length 2");H(this.entries,{key:R(u.value),value:R(o.value)})}}else for(var l in t)m(t,l)&&H(this.entries,{key:l,value:R(t[l])})},parseQuery:function(t){if(t){var e,r,n=K(t,"&"),a=0;while(a<n.length)e=n[a++],e.length&&(r=K(e,"="),H(this.entries,{key:rt(M(r)),value:rt(B(r,"="))}))}},serialize:function(){var t,e=this.entries,r=[],n=0;while(n<e.length)t=e[n++],H(r,it(t.key)+"="+it(t.value));return B(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ct=function(){v(this,lt);var t=arguments.length>0?arguments[0]:void 0;Z(this,new ot(t))},lt=ct.prototype;if(l(lt,{append:function(t,e){U(arguments.length,2);var r=P(this);H(r.entries,{key:R(t),value:R(e)}),r.updateURL()},delete:function(t){U(arguments.length,1);var e=P(this),r=e.entries,n=R(t),a=0;while(a<r.length)r[a].key===n?G(r,a,1):a++;e.updateURL()},get:function(t){U(arguments.length,1);for(var e=P(this).entries,r=R(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){U(arguments.length,1);for(var e=P(this).entries,r=R(t),n=[],a=0;a<e.length;a++)e[a].key===r&&H(n,e[a].value);return n},has:function(t){U(arguments.length,1);var e=P(this).entries,r=R(t),n=0;while(n<e.length)if(e[n++].key===r)return!0;return!1},set:function(t,e){U(arguments.length,1);for(var r,n=P(this),a=n.entries,s=!1,i=R(t),u=R(e),o=0;o<a.length;o++)r=a[o],r.key===i&&(s?G(a,o--,1):(s=!0,r.value=u));s||H(a,{key:i,value:u}),n.updateURL()},sort:function(){var t=P(this);S(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){var e,r=P(this).entries,n=g(t,arguments.length>1?arguments[1]:void 0),a=0;while(a<r.length)e=r[a++],n(e.value,e.key,this)},keys:function(){return new ut(this,"keys")},values:function(){return new ut(this,"values")},entries:function(){return new ut(this,"entries")}},{enumerable:!0}),c(lt,E,lt.entries,{name:"entries"}),c(lt,"toString",(function(){return P(this).serialize()}),{enumerable:!0}),f(ct,A),n({global:!0,forced:!o},{URLSearchParams:ct}),!o&&p(F)){var ft=u(O.has),ht=u(O.set),dt=function(t){if(_(t)){var e,r=t.body;if(y(r)===A)return e=t.headers?new F(t.headers):new F,ft(e,"content-type")||ht(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),b(t,{body:k(0,R(r)),headers:k(0,e)})}return t};if(p(T)&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return T(t,arguments.length>1?dt(arguments[1]):{})}}),p(q)){var vt=function(t){return v(this,$),new q(t,arguments.length>1?dt(arguments[1]):{})};$.constructor=vt,vt.prototype=$,n({global:!0,forced:!0},{Request:vt})}}t.exports={URLSearchParams:ct,getState:P}},1637:function(t,e,r){r(5556)},1947:function(t,e,r){"use strict";r(1539),r(8783),r(3948),r(1637),r(9714);var n=r(1926);e["Z"]={getRestaurants:function(t){var e=t.page,r=t.categoryId,a=new URLSearchParams({page:e,categoryId:r});return n.l.get("/restaurants?".concat(a.toString()))},getFeeds:function(){return n.l.get("/restaurants/feeds")},restaurants:{create:function(t){var e=t.formData;return n.l.post("/admin/restaurants",e)},getRestaurant:function(t){var e=t.restaurantId;return n.l.get("/restaurants/".concat(e))}},comments:{postComments:function(t){var e=t.restaurantId,r=t.text;return n.l.post("/comments",{restaurantId:e,text:r})},deleteComment:function(t){var e=t.id;return n.l["delete"]("/comments/".concat(e))}}}}}]);
//# sourceMappingURL=503-legacy.550932c4.js.map