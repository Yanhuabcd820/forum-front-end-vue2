"use strict";(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[29],{9077:function(t,e,n){n.d(e,{Z:function(){return o}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-3"},[n("h1",[t._v("餐廳後台")]),n("router-link",{attrs:{to:"/admin/restaurants"}},[t._v("Restaurants")]),t._v(" | "),n("router-link",{attrs:{to:"/admin/categories"}},[t._v("Categories")]),t._v(" | "),n("router-link",{attrs:{to:"/admin/users"}},[t._v("Users")])],1)},a=[],s=n(1001),u={},i=(0,s.Z)(u,r,a,!1,null,null,null),o=i.exports},2029:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container py-5"},[n("AdminNav"),n("router-link",{staticClass:"btn btn-primary mb-4",attrs:{to:"/admin/restaurants/new"}},[t._v(" New Restaurant ")]),n("AdminRestaurantsTable")],1)},a=[],s=n(9077),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[t._m(0),n("tbody",t._l(t.restaurants,(function(e){return n("tr",{key:e.id},[n("th",{attrs:{scope:"row"}},[t._v(" "+t._s(e.id)+" ")]),n("td",[t._v(t._s(e.Category?e.Category.name:"未分類"))]),n("td",[t._v(t._s(e.name))]),n("td",{staticClass:"d-flex justify-content-between"},[n("router-link",{staticClass:"btn btn-link",attrs:{to:{name:"ADMIN-RESTAURANT",params:{id:e.id}}}},[t._v("Show")]),n("router-link",{staticClass:"btn btn-link",attrs:{to:{name:"ADMIN-RESTAURANT-EDIT",params:{id:e.id}}}},[t._v("Edit")]),n("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.deleteRestaurant(e.id)}}},[t._v(" Delete ")])],1)])})),0)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("Category")]),n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col",width:"300"}},[t._v("操作")])])])}],o=n(6198),c=(n(7327),n(1539),n(5666),n(9032)),l=n(1926),d={data:function(){return{restaurants:[]}},created:function(){this.fetchRestaurants()},methods:{fetchRestaurants:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.Z.restaurants.get();case 2:n=e.sent,r=n.data,console.log(r),t.restaurants=r.restaurants;case 6:case"end":return e.stop()}}),e)})))()},deleteRestaurant:function(t){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,console.log(t),n.next=4,c.Z.restaurants["delete"](t);case 4:r=n.sent,a=r.data,console.log(a),e.restaurants=e.restaurants.filter((function(e){return e.id!==t})),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),e.isLoading=!1,l.F.fire({icon:"error",title:"無法取得餐廳類別，請稍後再試"});case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()}}},m=d,f=n(1001),v=(0,f.Z)(m,u,i,!1,null,null,null),p=v.exports,_={name:"AdminRestaurants",components:{AdminNav:s.Z,AdminRestaurantsTable:p},data:function(){return{}}},g=_,h=(0,f.Z)(g,r,a,!1,null,null,null),b=h.exports},9032:function(t,e,n){n(8309);var r=n(1926);e["Z"]={users:{get:function(){return r.l.get("/admin/users")},update:function(t){var e=t.userId,n=t.isAdmin;return r.l.put("/admin/users/".concat(e),{isAdmin:n})}},categories:{get:function(){return r.l.get("/admin/categories")},create:function(t){var e=t.name;return r.l.post("/admin/categories",{name:e})},update:function(t){var e=t.categoryId,n=t.name;return r.l.put("/admin/categories/".concat(e),{name:n})},delete:function(t){var e=t.categoryId;return r.l["delete"]("/admin/categories/".concat(e))}},restaurants:{getDetail:function(t){var e=t.restaurantId;return r.l.get("/admin/restaurants/".concat(e))},create:function(t){var e=t.formData;return r.l.post("/admin/restaurants",e)},get:function(){return r.l.get("/admin/restaurants")},delete:function(t){return r.l["delete"]("/admin/restaurants/".concat(t))},update:function(t){var e=t.restaurantId,n=t.formData;return r.l.put("/admin/restaurants/".concat(e),n)}}}}}]);
//# sourceMappingURL=29-legacy.7af5c3e2.js.map