"use strict";(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[555],{555:function(t,s,i){i.r(s),i.d(s,{default:function(){return z}});var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("main",{attrs:{role:"main"}},[i("div",{staticClass:"album py-5 bg-light"},[i("div",{staticClass:"container"},[i("UserProfileCard",{attrs:{initialProfile:t.profile,initialIsFollowed:t.isFollowed}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("UserFollowingsCard",{attrs:{initialFollowings:t.profile.Followings}}),i("br"),i("UserFollowersCard",{attrs:{initialFollowers:t.profile.Followers}})],1),i("div",{staticClass:"col-md-8"},[i("UserCommentsCard",{attrs:{Comments:t.profile.Comments}}),i("br"),i("UserFavoritedRestaurantsCard",{attrs:{initialFavoritedRestaurants:t.profile.FavoritedRestaurants}})],1)])],1)])])},a=[],r=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"card mb-3"},[i("div",{staticClass:"row no-gutters"},[i("div",{staticClass:"col-md-4"},[i("img",{attrs:{src:t._f("emptyImage")(t.profile.image),width:"300px",height:"300px"}})]),i("div",{staticClass:"col-md-8"},[i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),i("p",{staticClass:"card-text"},[t._v(t._s(t.profile.email))]),i("ul",{staticClass:"list-unstyled list-inline"},[i("li",[i("strong",[t._v(t._s(t.profile.Comments.length))]),t._v(" 已評論餐廳 ")]),i("li",[i("strong",[t._v(t._s(t.profile.FavoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),i("li",[i("strong",[t._v(t._s(t.profile.Followers.length))]),t._v(" followings (追蹤者) ")]),i("li",[i("strong",[t._v(t._s(t.profile.Followings.length))]),t._v(" followers (追隨者) ")])]),i("p",[i("router-link",{attrs:{to:{name:"USER-EDIT",params:{id:t.profile.id}}}},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v(" edit ")])])],1),t.isAuthenticated?i("form",{staticStyle:{display:"contents"},attrs:{action:"/following/51?_method=DELETE",method:"POST"}},[t.isFollowed?i("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.cancleFollow(t.profile.id)}}},[t._v(" 取消追蹤 ")]):i("button",{staticClass:"btn btn-primary",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.addFollow(t.profile.id)}}},[t._v(" 追蹤 ")])]):t._e()])])])])},l=[],o=i(3652),n=i(8247),d=i(1926),c=i(629),u={mixins:[n.L],props:{initialProfile:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!0}},data(){return{profile:this.initialProfile,isFollowed:this.initialIsFollowed}},computed:{...(0,c.rn)(["currentUser","isAuthenticated"])},created(){console.log("this.currentUser",this.currentUser)},methods:{async cancleFollow(t){try{await o.Z.deleteFollowing({userId:t}),this.isFollowed=!1}catch(s){d.F.fire({icon:"warning",title:"無法刪除追蹤"})}},async addFollow(t){try{await o.Z.addFollowing({userId:t}),this.isFollowed=!0}catch(s){d.F.fire({icon:"warning",title:"無法增加追蹤"})}}},watch:{initialProfile(t){this.profile={...this.initialProfile,...t}},initialIsFollowed(t){this.isFollowed={...this.initialIsFollowed,...t}}}},m=u,h=i(1001),p=(0,h.Z)(m,r,l,!1,null,null,null),f=p.exports,v=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(" "+t._s(t.initialFollowings.length))]),t._v(" followings (追蹤者) ")]),i("div",{staticClass:"card-body"},t._l(t.initialFollowings,(function(t){return i("router-link",{key:t.id,staticClass:"ml-1",attrs:{to:{name:"USER",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},w=[],C={name:"UserFollowingsCard",props:{initialFollowings:{type:Array,required:!0}}},g=C,F=(0,h.Z)(g,v,w,!1,null,null,null),_=F.exports,y=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.initialFollowers.length))]),t._v(" followers (追隨者) ")]),i("div",{staticClass:"card-body"},t._l(t.initialFollowers,(function(t){return i("router-link",{key:t.id,staticClass:"ml-1",attrs:{to:{name:"USER",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},b=[],U={name:"UserFollowersCard",props:{initialFollowers:{type:Array,required:!0}}},R=U,k=(0,h.Z)(R,y,b,!1,null,null,null),E=k.exports,x=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("strong",[t._v(t._s(t.Comments.length))]),t._v(" 已評論餐廳 ")]),i("div",{staticClass:"card-body"},t._l(t.Comments,(function(t){return i("router-link",{key:t.id,staticClass:"ml-1 mb-1",attrs:{to:{name:"RESTAURANTS",params:{id:t.Restaurant.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.Restaurant.image,width:"60",height:"60"}})])})),1)])},A=[],I={name:"UserCommentsCard",props:{Comments:{type:Array,required:!0}},data(){return{}}},P=I,S=(0,h.Z)(P,x,A,!1,null,null,null),Z=S.exports,T=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"}),i("div",{staticClass:"card-body"},t._l(t.initialFavoritedRestaurants,(function(t){return i("router-link",{key:t.id,staticClass:"ml-1 mb-1",attrs:{to:{name:"RESTAURANTS",params:{id:t.id}}}},[i("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},$=[],q={name:"UserFavoritedRestaurants",props:{initialFavoritedRestaurants:{type:Array,required:!0}}},D=q,L=(0,h.Z)(D,T,$,!1,null,null,null),N=L.exports,O={name:"User",components:{UserProfileCard:f,UserFollowingsCard:_,UserFollowersCard:E,UserCommentsCard:Z,UserFavoritedRestaurantsCard:N},data(){return{profile:{id:"",name:"",email:"",image:"",Comments:[],FavoritedRestaurants:[],Followings:[],Followers:[]},isFollowed:!1}},beforeRouteUpdate(t,s,i){const{id:e}=t.params;this.fetchUser(e),i()},created(){const{id:t}=this.$route.params;this.fetchUser(t)},methods:{async fetchUser(t){try{const{data:s}=await o.Z.get({userId:t});console.log("data",s);const{profile:i,isFollowed:e}=s;this.profile=i,this.isFollowed=e;const{id:a,name:r,email:l,image:n,Comments:d,FavoritedRestaurants:c,Followings:u,Followers:m}=i;this.id=a,this.name=r,this.email=l,this.image=n,this.Comments=d,this.FavoritedRestaurants=c,this.Followings=u,this.Followers=m}catch(s){d.F.fire({icon:"error",title:"無法取得user，請稍後再試"})}}}},j=O,B=(0,h.Z)(j,e,a,!1,null,null,null),z=B.exports}}]);
//# sourceMappingURL=555.0e7d95fe.js.map