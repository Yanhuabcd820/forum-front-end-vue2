"use strict";(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[148],{8448:function(t,a,r){r.d(a,{Z:function(){return C}});var s,e=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ul",{staticClass:"nav nav-tabs mb-4"},t._l(t.tabs,(function(a){return r("li",{key:a.id,staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:a.path}},[t._v(" "+t._s(a.title)+" ")])],1)})),0)},n=[],i=new Uint8Array(16);function o(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(i)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function c(t){return"string"===typeof t&&u.test(t)}for(var d=c,l=[],p=0;p<256;++p)l.push((p+256).toString(16).substr(1));function f(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[t[a+0]]+l[t[a+1]]+l[t[a+2]]+l[t[a+3]]+"-"+l[t[a+4]]+l[t[a+5]]+"-"+l[t[a+6]]+l[t[a+7]]+"-"+l[t[a+8]]+l[t[a+9]]+"-"+l[t[a+10]]+l[t[a+11]]+l[t[a+12]]+l[t[a+13]]+l[t[a+14]]+l[t[a+15]]).toLowerCase();if(!d(r))throw TypeError("Stringified UUID is invalid");return r}var v=f;function h(t,a,r){t=t||{};var s=t.random||(t.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,a){r=r||0;for(var e=0;e<16;++e)a[r+e]=s[e];return a}return v(s)}var m=h,g={data(){return{tabs:[{id:m(),title:"首頁",path:"/restaurants"},{id:m(),title:"最新動態",path:"/restaurants/feeds"},{id:m(),title:"TOP 10 人氣餐廳",path:"/restaurants/top"},{id:m(),title:"美食達人",path:"/users/top"}]}}},b=g,y=r(1001),_=(0,y.Z)(b,e,n,!1,null,"2ab0b204",null),C=_.exports},2261:function(t,a,r){r.d(a,{Z:function(){return u}});var s=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},e=[function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"spinner"},[r("div",{staticClass:"bouncing-loader"},[r("div"),r("div"),r("div")])])}],n=r(1001),i={},o=(0,n.Z)(i,s,e,!1,null,"74807b6a",null),u=o.exports},148:function(t,a,r){r.r(a),r.d(a,{default:function(){return v}});var s=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"container py-5"},[r("navTabs"),t.isLoading?r("Spinner"):[r("h1",{staticClass:"mt-5"},[t._v("人氣餐廳")]),r("hr"),t._l(t.restaurants,(function(a){return r("div",{key:a.id,staticClass:"card mb-3",staticStyle:{"max-width":"540px",margin:"auto"}},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("a",{attrs:{href:"#"}},[r("img",{staticClass:"card-img",attrs:{src:a.image}})])]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(" "+t._s(a.name)+" ")]),r("span",{staticClass:"badge badge-secondary"},[t._v("收藏數："+t._s(a.FavoritedUsers.length))]),r("p",{staticClass:"card-text"},[t._v(" "+t._s(a.description)+" ")]),r("a",{staticClass:"btn btn-primary mr-2",attrs:{href:"#"}},[t._v("Show")]),a.isFavorited?r("button",{staticClass:"btn btn-danger mr-2",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),t.cancleFavorited(a.id)}}},[t._v(" 移除最愛 ")]):r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),r.stopPropagation(),t.addFavorited(a.id)}}},[t._v(" 加到最愛 ")])])])])])}))]],2)},e=[],n=(r(1703),r(8448)),i=r(1926),o={getTopRestaurants(){return i.l.get("/restaurants/top")}},u=r(2261),c=r(3652),d={name:"RestaurantsTop",components:{navTabs:n.Z,Spinner:u.Z},data(){return{restaurants:{},isLoading:!0}},created(){this.fetchTop()},methods:{async fetchTop(){try{const{data:t}=await o.getTopRestaurants();this.restaurants=t.restaurants,this.isLoading=!1}catch(t){this.isLoading=!1,i.F.fire({icon:"error",title:"無法取得資料，請稍後再試"})}},async cancleFavorited(t){try{const{data:a}=await c.Z.deleteFavorite({restaurantId:t});if("success"!==a.status)throw new Error(a.message);this.restaurants=this.restaurants.map((a=>a.id===t?{...a,isFavorited:!1}:a))}catch(a){console.log("error",a),i.F.fire({icon:"error",title:"無法取得資料，請稍後再試"})}},async addFavorited(t){try{const{data:a}=await c.Z.addFavorite({restaurantId:t});if("success"!==a.status)throw new Error(a.message);this.restaurants=this.restaurants.map((a=>a.id===t?{...a,isFavorited:!0}:a))}catch(a){console.log("error",a),i.F.fire({icon:"error",title:"無法取得資料，請稍後再試"})}}}},l=d,p=r(1001),f=(0,p.Z)(l,s,e,!1,null,null,null),v=f.exports}}]);
//# sourceMappingURL=148.74e49f61.js.map