(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[982],{9077:function(t,r,n){"use strict";n.d(r,{Z:function(){return o}});var e=function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("div",{staticClass:"mb-3"},[n("h1",[t._v("餐廳後台")]),n("router-link",{attrs:{to:"/admin/restaurants"}},[t._v("Restaurants")]),t._v(" | "),n("router-link",{attrs:{to:"/admin/categories"}},[t._v("Categories")]),t._v(" | "),n("router-link",{attrs:{to:"/admin/users"}},[t._v("Users")])],1)},s=[],i=n(1001),a={},u=(0,i.Z)(a,e,s,!1,null,null,null),o=u.exports},7982:function(t,r,n){"use strict";n.r(r),n.d(r,{default:function(){return v}});var e=function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("div",{staticClass:"container py-5"},[n("AdminNav"),n("table",{staticClass:"table"},[t._m(0),n("tbody",t._l(t.users,(function(r){return n("tr",{key:r.id},[n("th",{attrs:{scope:"row"}},[t._v(t._s(r.id))]),n("td",[t._v(t._s(r.email))]),n("td",[t._v(t._s(r.isAdmin?"admin":"user"))]),n("td",[t.currentUser.id!==r.id?n("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(n){return t.toggleIsAdmin({userId:r.id,isAdmin:r.isAdmin})}}},[t._v(" "+t._s(r.isAdmin?"set as user":"set as admin")+" ")]):t._e()])])})),0)])],1)},s=[function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("Email")]),n("th",{attrs:{scope:"col"}},[t._v("Role")]),n("th",{attrs:{scope:"col",width:"140"}},[t._v("Action")])])])}],i=n(6198),a=n(3019),u=(n(1539),n(9714),n(1703),n(1249),n(5666),n(9077)),o=n(9032),c=n(1926),f=n(629),l={components:{AdminNav:u.Z},data:function(){return{users:[]}},computed:(0,a.Z)({},(0,f.rn)(["currentUser"])),methods:{fetchUsers:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function r(){var n,e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.Z.users.get();case 3:n=r.sent,e=n.data,console.log("adminusers",e),t.users=e.users,r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),t.isProcessing=!1,c.F.fire({icon:"warning",title:"無法讀取adminUser"});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},toggleIsAdmin:function(t){var r=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var e,s,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.userId,s=t.isAdmin,n.prev=1,n.next=4,o.Z.users.update({userId:e,isAdmin:(!s).toString()});case 4:if(i=n.sent,u=i.data,"error"!==u.status){n.next=8;break}throw new Error(u.message);case 8:console.log("toggleIsAdmin",u),r.users=r.users.map((function(t){return t.id===e?(0,a.Z)((0,a.Z)({},t),{},{isAdmin:!t.isAdmin}):t})),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](1),r.isProcessing=!1,c.F.fire({icon:"warning",title:"無法讀取切換role"});case 16:case"end":return n.stop()}}),n,null,[[1,12]])})))()}},created:function(){this.fetchUsers()}},d=l,m=n(1001),p=(0,m.Z)(d,e,s,!1,null,null,null),v=p.exports},7741:function(t,r,n){var e=n(1702),s=Error,i=e("".replace),a=function(t){return String(s(t).stack)}("zxcasd"),u=/\n\s*at [^:]*:[^\n]*/,o=u.test(a);t.exports=function(t,r){if(o&&"string"==typeof t&&!s.prepareStackTrace)while(r--)t=i(t,u,"");return t}},2914:function(t,r,n){var e=n(7293),s=n(9114);t.exports=!e((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",s(1,7)),7!==t.stack)}))},9587:function(t,r,n){var e=n(614),s=n(111),i=n(7674);t.exports=function(t,r,n){var a,u;return i&&e(a=r.constructor)&&a!==n&&s(u=a.prototype)&&u!==n.prototype&&i(t,u),t}},8340:function(t,r,n){var e=n(111),s=n(8880);t.exports=function(t,r){e(r)&&"cause"in r&&s(t,"cause",r.cause)}},6277:function(t,r,n){var e=n(1340);t.exports=function(t,r){return void 0===t?arguments.length<2?"":r:e(t)}},2626:function(t,r,n){var e=n(3070).f;t.exports=function(t,r,n){n in t||e(t,n,{configurable:!0,get:function(){return r[n]},set:function(t){r[n]=t}})}},7066:function(t,r,n){"use strict";var e=n(9670);t.exports=function(){var t=e(this),r="";return t.global&&(r+="g"),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.dotAll&&(r+="s"),t.unicode&&(r+="u"),t.sticky&&(r+="y"),r}},9191:function(t,r,n){"use strict";var e=n(5005),s=n(2597),i=n(8880),a=n(7976),u=n(7674),o=n(9920),c=n(2626),f=n(9587),l=n(6277),d=n(8340),m=n(7741),p=n(2914),v=n(9781),g=n(1913);t.exports=function(t,r,n,h){var _="stackTraceLimit",k=h?2:1,E=t.split("."),y=E[E.length-1],b=e.apply(null,E);if(b){var x=b.prototype;if(!g&&s(x,"cause")&&delete x.cause,!n)return b;var A=e("Error"),w=r((function(t,r){var n=l(h?r:t,void 0),e=h?new b(t):new b;return void 0!==n&&i(e,"message",n),p&&i(e,"stack",m(e.stack,2)),this&&a(x,this)&&f(e,this,w),arguments.length>k&&d(e,arguments[k]),e}));if(w.prototype=x,"Error"!==y?u?u(w,A):o(w,A,{name:!0}):v&&_ in b&&(c(w,b,_),c(w,b,"prepareStackTrace")),o(w,b),!g)try{x.name!==y&&i(x,"name",y),x.constructor=w}catch(R){}return w}}},1249:function(t,r,n){"use strict";var e=n(2109),s=n(2092).map,i=n(1194),a=i("map");e({target:"Array",proto:!0,forced:!a},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},1703:function(t,r,n){var e=n(2109),s=n(7854),i=n(2104),a=n(9191),u="WebAssembly",o=s[u],c=7!==Error("e",{cause:7}).cause,f=function(t,r){var n={};n[t]=a(t,r,c),e({global:!0,forced:c},n)},l=function(t,r){if(o&&o[t]){var n={};n[t]=a(u+"."+t,r,c),e({target:u,stat:!0,forced:c},n)}};f("Error",(function(t){return function(r){return i(t,this,arguments)}})),f("EvalError",(function(t){return function(r){return i(t,this,arguments)}})),f("RangeError",(function(t){return function(r){return i(t,this,arguments)}})),f("ReferenceError",(function(t){return function(r){return i(t,this,arguments)}})),f("SyntaxError",(function(t){return function(r){return i(t,this,arguments)}})),f("TypeError",(function(t){return function(r){return i(t,this,arguments)}})),f("URIError",(function(t){return function(r){return i(t,this,arguments)}})),l("CompileError",(function(t){return function(r){return i(t,this,arguments)}})),l("LinkError",(function(t){return function(r){return i(t,this,arguments)}})),l("RuntimeError",(function(t){return function(r){return i(t,this,arguments)}}))},9714:function(t,r,n){"use strict";var e=n(1702),s=n(6530).PROPER,i=n(1320),a=n(9670),u=n(7976),o=n(1340),c=n(7293),f=n(7066),l="toString",d=RegExp.prototype,m=d[l],p=e(f),v=c((function(){return"/a/b"!=m.call({source:"a",flags:"b"})})),g=s&&m.name!=l;(v||g)&&i(RegExp.prototype,l,(function(){var t=a(this),r=o(t.source),n=t.flags,e=o(void 0===n&&u(d,t)&&!("flags"in d)?p(t):n);return"/"+r+"/"+e}),{unsafe:!0})},9032:function(t,r,n){"use strict";n(8309);var e=n(1926);r["Z"]={users:{get:function(){return e.l.get("/admin/users")},update:function(t){var r=t.userId,n=t.isAdmin;return e.l.put("/admin/users/".concat(r),{isAdmin:n})}},categories:{get:function(){return e.l.get("/admin/categories")},create:function(t){var r=t.name;return e.l.post("/admin/categories",{name:r})},update:function(t){var r=t.categoryId,n=t.name;return e.l.put("/admin/categories/".concat(r),{name:n})},delete:function(t){var r=t.categoryId;return e.l["delete"]("/admin/categories/".concat(r))}},restaurants:{getDetail:function(t){var r=t.restaurantId;return e.l.get("/admin/restaurants/".concat(r))},create:function(t){var r=t.formData;return e.l.post("/admin/restaurants",r)},get:function(){return e.l.get("/admin/restaurants")},delete:function(t){return e.l["delete"]("/admin/restaurants/".concat(t))},update:function(t){var r=t.restaurantId,n=t.formData;return e.l.put("/admin/restaurants/".concat(r),n)}}}}}]);
//# sourceMappingURL=982-legacy.2d6dd23d.js.map