"use strict";(self["webpackChunkforum_front_end_vue2"]=self["webpackChunkforum_front_end_vue2"]||[]).push([[913],{8448:function(t,e,n){n.d(e,{Z:function(){return _}});var r,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"nav nav-tabs mb-4"},t._l(t.tabs,(function(e){return n("li",{key:e.id,staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:e.path}},[t._v(" "+t._s(e.title)+" ")])],1)})),0)},o=[],s=new Uint8Array(16);function i(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function l(t){return"string"===typeof t&&u.test(t)}for(var c=l,d=[],f=0;f<256;++f)d.push((f+256).toString(16).substr(1));function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n}var v=p;function m(t,e,n){t=t||{};var r=t.random||(t.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var a=0;a<16;++a)e[n+a]=r[a];return e}return v(r)}var h=m,g={data:function(){return{tabs:[{id:h(),title:"首頁",path:"/restaurants"},{id:h(),title:"最新動態",path:"/restaurants/feeds"},{id:h(),title:"TOP 10 人氣餐廳",path:"/restaurants/top"},{id:h(),title:"美食達人",path:"/users/top"}]}}},w=g,b=n(1001),C=(0,b.Z)(w,a,o,!1,null,"2ab0b204",null),_=C.exports},2261:function(t,e,n){n.d(e,{Z:function(){return u}});var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("div",{staticClass:"bouncing-loader"},[n("div"),n("div"),n("div")])])}],o=n(1001),s={},i=(0,o.Z)(s,r,a,!1,null,"74807b6a",null),u=i.exports},1648:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container py-5"},[n("navTabs"),t.isLoading?n("Spinner"):[n("h1",{staticClass:"mt-5"},[t._v("美食達人")]),n("hr"),n("div",{staticClass:"row text-center"},t._l(t.users,(function(e){return n("div",{key:e.id,staticClass:"col-3"},[n("a",{attrs:{href:"#"}},[n("img",{attrs:{src:e.image?e.image:"http://via.placeholder.com/300x300?text=No+Image",width:"140px",height:"140px"}})]),n("h2",[t._v(t._s(e.name))]),n("span",{staticClass:"badge badge-secondary"},[t._v("追蹤人數："+t._s(e.followerCount))]),n("p",{staticClass:"mt-3"},[e.isFollowed?n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(n){return t.cancleFollow(e.id)}}},[t._v(" 取消追蹤 ")]):n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.addFollow(e.id)}}},[t._v(" 追蹤 ")])])])})),0)]],2)},a=[],o=n(3019),s=n(6198),i=(n(5666),n(1249),n(8309),n(8448)),u=n(3652),l=n(2261),c=n(1926),d={name:"userTop",components:{navTabs:i.Z,Spinner:l.Z},data:function(){return{users:[],isLoading:!0}},created:function(){this.fetchTopUsers()},methods:{fetchTopUsers:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.getTopUsers();case 3:n=e.sent,r=n.data,t.users=r.users.map((function(t){return{id:t.id,name:t.name,image:t.image,followerCount:t.FollowerCount,isFollowed:t.isFollowed}})),t.isLoading=!1,e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](0),t.isLoading=!1,console.log(e.t0),c.F.fire({icon:"error",title:"無法取得美食達人，請稍後再試"});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()},cancleFollow:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.deleteFollowing({userId:t});case 3:r=n.sent,r.data,e.users=e.users.map((function(e){return e.id===t?(0,o.Z)((0,o.Z)({},e),{},{followerCount:e.followerCount-1,isFollowed:!1}):(0,o.Z)({},e)})),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log(n.t0),c.F.fire({icon:"error",title:"無法取得美食達人，請稍後再試"});case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},addFollow:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.addFollowing({userId:t});case 3:r=n.sent,r.data,e.users=e.users.map((function(t){return t.id===userId?(0,o.Z)((0,o.Z)({},t),{},{followerCount:t.followerCount+1,isFollowed:!0}):(0,o.Z)({},t)})),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),c.F.fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},f=d,p=n(1001),v=(0,p.Z)(f,r,a,!1,null,null,null),m=v.exports},1249:function(t,e,n){var r=n(2109),a=n(2092).map,o=n(1194),s=o("map");r({target:"Array",proto:!0,forced:!s},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=913-legacy.53962c80.js.map